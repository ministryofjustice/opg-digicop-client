{% extends 'base.html.twig' %}

{% block htmlTitle %}View Users{% endblock %}
{% block pageTitle %}
    <h1 class="govuk-heading-xl">View Users</h1>
{% endblock %}

{% block content %}
    <div class="govuk-width-container">
        <main class="govuk-main-wrapper" id="main-content" role="main">
            <table class="govuk-table">
                <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header" scope="col">User Email</th>
                    <th class="govuk-table__header" scope="col">Created</th>
                    <th class="govuk-table__header" scope="col">Last Logged In</th>
                    <th class="govuk-table__header table-column__centred" scope="col">Delete</th>
                </tr>
                </thead>
                <tbody class="govuk-table__body">
                {% for user in users %}
                    <tr class="govuk-table__row" >
                        <td class="govuk-table__cell">{{ user.email }}</td>
                        <td class="govuk-table__cell">{{ user.createdAt|date('Y-m-d') }}</td>
                        <td class="govuk-table__cell">{{ user.lastLoginAt|date('Y-m-d H:i:s') }}</td>
                        <td class="govuk-table__cell">
                            <form id="deleteUser" action="{{ path('delete-user', {'id': user.id}) }}" method="post">
                                <input type="hidden" name="_method" value="DELETE">
                                <button type="submit" id="deleteUser_submit" class="govuk-button govuk-button--warning govuk-!-margin-bottom-0">Delete user</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </main>
    </div>

{% endblock %}
